(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2603],{706:(e,s,t)=>{"use strict";t.d(s,{J:()=>a});let a=(e,s)=>{"function"==typeof window.gtag&&window.gtag("event",e,s||{})}},1082:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(5155),r=t(2115),i=t(5695),l=t(3168),n=t(6766),d=t(4990);function c(){var e,s;let t=(0,i.useRouter)(),c=null!=(s=null==(e=(0,i.useParams)())?void 0:e.id)?s:"",[m,u]=(0,r.useState)(null),[x,p]=(0,r.useState)(!0),[b,g]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=async()=>{let{data:e,error:s}=await l.N.from("stores").select("*").eq("id",c).single();s||!e?(console.error("取得エラー:",s),g("データ取得に失敗しました")):u(e),p(!1)};c&&e()},[c]);let h=async e=>{if(!window.confirm("この店舗を削除しますか？"))return;let{error:s}=await l.N.from("stores").update({is_deleted:!0}).eq("id",e);if(s){alert("削除に失敗しました"),console.error(s.message);return}alert("削除しました！"),t.push("/admin/stores-to-publish")};return x?(0,a.jsx)("div",{className:"text-center p-10",children:"読み込み中..."}):b?(0,a.jsx)("div",{className:"text-center text-red-500 p-10",children:b}):m?(0,a.jsxs)("div",{className:"min-h-screen bg-[#FEFCF6] pt-24 px-10 pb-10 text-gray-800",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center mb-8",children:"店舗詳細"}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,a.jsx)(o,{label:"店名",value:m.name}),(0,a.jsx)(o,{label:"ジャンル",value:m.genre}),(0,a.jsx)(o,{label:"エリア",value:m.area}),(0,a.jsx)(o,{label:"住所",value:m.address}),(0,a.jsx)(o,{label:"電話番号",value:m.phone}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"営業時間"}),(0,a.jsx)("div",{className:"text-lg whitespace-pre-line",children:m.opening_hours.split("\n").filter(Boolean).map(e=>e.trim()).join("\n")})]}),(0,a.jsx)(o,{label:"公式サイト",value:m.website_url,isLink:!0}),(0,a.jsx)(o,{label:"Instagramアカウント",value:m.instagram_url,isLink:!0}),(0,a.jsx)(o,{label:"支払い方法",value:m.payment_methods.join(", ")}),(0,a.jsx)(o,{label:"店舗説明",value:m.description}),m.image_url&&(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsx)(n.default,{src:m.image_url,alt:"店舗画像",width:400,height:300,className:"rounded shadow"})}),(0,a.jsx)(d.A,{posts:[m.store_instagrams,m.store_instagrams2,m.store_instagrams3].filter(e=>!!e)}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-8",children:[(0,a.jsx)("button",{onClick:()=>t.push("/admin/stores-to-publish"),className:"bg-gray-500 text-white py-2 px-6 rounded hover:bg-gray-600",children:"戻る"}),(0,a.jsx)("button",{onClick:()=>t.push("/admin/stores/".concat(m.id,"/edit")),className:"bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600",children:"編集する"}),(0,a.jsx)("button",{onClick:()=>h(m.id),className:"bg-red-500 text-white py-2 px-6 rounded hover:bg-red-600",children:"削除する"})]})]})]}):null}function o(e){let{label:s,value:t,isLink:r}=e;return t?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s}),r?(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline break-words",children:t}):(0,a.jsx)("p",{className:"text-lg break-words",children:t||"ー"})]}):null}},3168:(e,s,t)=>{"use strict";t.d(s,{N:()=>a});let a=(0,t(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},4990:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(5155),r=t(9137),i=t.n(r),l=t(2115),n=t(7677),d=t(7269);t(2252),t(9408),t(6970);var c=t(706);function o(e){let{posts:s,onClickPost:t}=e;return((0,l.useEffect)(()=>{if(!document.getElementById("instagram-embed-script")){let e=document.createElement("script");e.id="instagram-embed-script",e.src="https://www.instagram.com/embed.js",e.async=!0,e.onerror=()=>{console.warn("Instagram embed script failed to load.")},document.body.appendChild(e)}},[]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{try{var e,s;null==(s=window.instgrm)||null==(e=s.Embeds)||e.process()}catch(e){console.warn("Instagram Embed error:",e)}},500);return()=>clearTimeout(e)},[s]),0===s.length)?null:(0,a.jsxs)("div",{className:"jsx-31a727e351345d87 w-full px-4 pb-8 relative",children:[(0,a.jsxs)("p",{className:"jsx-31a727e351345d87 text-base mb-2 flex items-center gap-2 font-[#1F1F21]",children:[(0,a.jsx)("span",{className:"jsx-31a727e351345d87 w-[12px] h-[12px] bg-[#4B5C9E] rounded-[2px] inline-block"}),"Instagram"]}),(0,a.jsx)(n.RC,{slidesPerView:1,spaceBetween:10,navigation:!0,loop:!0,pagination:{clickable:!0},grabCursor:!0,simulateTouch:!0,touchStartPreventDefault:!1,modules:[d.Vx,d.dK],className:"w-full rounded-lg instagram-slider",children:s.map((e,s)=>(0,a.jsx)(n.qr,{children:(0,a.jsx)("div",{className:"jsx-31a727e351345d87 w-full aspect-square rounded-lg overflow-hidden",children:(0,a.jsx)("div",{onClick:async s=>{s.stopPropagation();try{(0,c.J)("click_instagram",{instagram_url:e}),await new Promise(e=>setTimeout(e,300)),t&&await t(e)}finally{window.open(e,"_blank","noopener,noreferrer")}},className:"jsx-31a727e351345d87 block w-full h-full cursor-pointer",children:(0,a.jsx)("blockquote",{"data-instgrm-permalink":e,"data-instgrm-version":"14",style:{width:"100%",height:"100%",margin:0},className:"jsx-31a727e351345d87 instagram-media"})})})},s))}),(0,a.jsx)(i(),{id:"31a727e351345d87",children:".instagram-slider .swiper-button-prev,.instagram-slider .swiper-button-next{color:white;width:32px;height:32px;background:rgba(0,0,0,.4);-webkit-border-radius:9999px;-moz-border-radius:9999px;border-radius:9999px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.instagram-slider .swiper-button-prev::after,.instagram-slider .swiper-button-next::after{font-size:18px}"})]})}},9847:(e,s,t)=>{Promise.resolve().then(t.bind(t,1082))}},e=>{var s=s=>e(e.s=s);e.O(0,[1155,851,4212,7469,8441,1684,7358],()=>s(9847)),_N_E=e.O()}]);