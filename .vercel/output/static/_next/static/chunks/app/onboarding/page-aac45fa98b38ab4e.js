(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{2151:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var r=a(5155),t=a(2115),l=a(5695),n=a(3168);let i=["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],u=["男性","女性","その他"],o=["10代以下","20代","30代","40代","50代以上"];function c(){let e=(0,l.useRouter)(),[s,a]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[m,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),x=async()=>{f(!0);let{data:{user:a},error:r}=await n.N.auth.getUser();if(r||!a){alert("ログイン情報が取得できませんでした。"),e.push("/login");return}if(!s||!c||!m){alert("すべての項目を選択してください。"),f(!1);return}let{data:t,error:l}=await n.N.from("user_profiles").select("id").eq("id",a.id).maybeSingle();if(l){console.error("プロフィール取得エラー:",l.message),alert("プロフィール確認中にエラーが発生しました"),f(!1);return}if(!t){let{error:e}=await n.N.from("user_profiles").upsert({id:a.id,name:"オトナビさん",avatar_url:"/setting.svg"},{onConflict:"id"});if(e){alert("プロフィールの作成に失敗しました："+e.message),f(!1);return}}let{error:i}=await n.N.from("user_survey_answers").upsert({user_id:a.id,gender:s,age_range:c,prefecture:m},{onConflict:"user_id"});if(i){console.error("アンケート保存エラー:",i.message),alert("アンケートの保存に失敗しました"),f(!1);return}e.push("/mypage")};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#FEFCF6] px-4",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow max-w-md w-full space-y-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-center",children:"簡単なアンケートにお答えください"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"font-semibold",children:"性別"}),(0,r.jsxs)("select",{className:"w-full border px-2 py-1 rounded",value:s,onChange:e=>a(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"選択してください"}),u.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"font-semibold",children:"年代"}),(0,r.jsxs)("select",{className:"w-full border px-2 py-1 rounded",value:c,onChange:e=>d(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"選択してください"}),o.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"font-semibold",children:"都道府県"}),(0,r.jsxs)("select",{className:"w-full border px-2 py-1 rounded",value:m,onChange:e=>h(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"選択してください"}),i.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsx)("button",{onClick:x,disabled:p,className:"w-full bg-black text-white py-2 rounded hover:opacity-80 disabled:opacity-50",children:p?"送信中...":"送信してマイページへ"})]})})}},3168:(e,s,a)=>{"use strict";a.d(s,{N:()=>r});let r=(0,a(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"notFound")&&a.d(s,{notFound:function(){return r.notFound}}),a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},8298:(e,s,a)=>{Promise.resolve().then(a.bind(a,2151))}},e=>{var s=s=>e(e.s=s);e.O(0,[851,8441,1684,7358],()=>s(8298)),_N_E=e.O()}]);