(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473,854],{1473:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var r=n(5155),i=n(2115),s=n(9047),a=n(6855),o=n(2558);let u={width:"100%",height:"80vh"};function l(){let{isLoaded:t}=(0,s.KD)({googleMapsApiKey:"AIzaSyCTM0zn6wKK2F3nG4Qp0xHoQaAMn-dhrac"}),[e,n]=(0,i.useState)([]),[l,c]=(0,i.useState)(null),[d,f]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(!1),[y,D]=(0,i.useState)(!1),$=(0,i.useRef)(null);(0,i.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{let{latitude:e,longitude:n}=t.coords,r={lat:e,lng:n};console.log("\uD83D\uDCCD 現在地取得:",r),f(r),p(r),M(e,n)},t=>console.error("\uD83D\uDCCD 現在地取得エラー:",t))},[]);let M=async(t,e)=>{if(!t||!e)return;let{data:r,error:i}=await a.N.from("stores").select("id, latitude, longitude, name, area, genre, opening_hours");if(i){console.error("\uD83D\uDD25 Supabase Error:",i.message);return}if(r){console.log("\uD83D\uDCCD 取得した店舗データ:",r);let i=r.map(t=>({id:t.id,lat:Number(t.latitude),lng:Number(t.longitude),name:t.name,area:t.area,genre:t.genre,isOpen:(0,o.C)(t.opening_hours).isOpen})).filter(n=>Math.sqrt(Math.pow(n.lat-t,2)+Math.pow(n.lng-e,2))<=5e3/111e3);n(y?i.filter(t=>t.isOpen):i)}};return t&&h?(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsxs)(s.u6,{mapContainerStyle:u,center:h,zoom:14,onLoad:t=>{$.current=t},onDragEnd:()=>{if($.current){let t=$.current.getCenter();t&&(p({lat:t.lat(),lng:t.lng()}),g(!0))}},children:[d&&(0,r.jsx)(s.jl,{center:d,radius:50,options:{strokeColor:"#007bff",strokeOpacity:.8,strokeWeight:2,fillColor:"#007bff",fillOpacity:.35}}),e.map((t,e)=>(0,r.jsx)(s.pH,{position:{lat:t.lat,lng:t.lng},onClick:()=>{console.log("✅ ピンがクリックされた:",t),c(t)},label:{text:t.name,color:"black",fontSize:"12px",fontWeight:"bold"}},e))]}),m&&(0,r.jsxs)("div",{style:{position:"absolute",top:20,left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0px 4px 10px rgba(0,0,0,0.2)"},children:[(0,r.jsx)("button",{onClick:()=>{h&&(M(h.lat,h.lng),g(!1))},style:{backgroundColor:"#ff5722",color:"white",padding:"10px 20px",borderRadius:"5px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",border:"2px solid #e64a19",marginRight:"12px"},children:"\uD83D\uDD0D このエリアで検索"}),(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",fontSize:"14px",color:"#333",fontWeight:"bold"},children:[(0,r.jsx)("input",{type:"checkbox",checked:y,onChange:()=>D(!y),style:{marginRight:"6px",transform:"scale(1.2)"}}),"営業中のみ表示"]})]}),l&&(0,r.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"white",padding:"16px",borderTopLeftRadius:"10px",borderTopRightRadius:"10px",boxShadow:"0px -2px 10px rgba(0, 0, 0, 0.1)",textAlign:"center",color:"black",fontSize:"16px",cursor:"pointer"},children:[(0,r.jsx)("h2",{style:{fontSize:"18px",fontWeight:"bold"},children:l.name}),(0,r.jsxs)("p",{children:["\uD83D\uDCCD ",l.area," / \uD83C\uDFB5 ",l.genre]}),(0,r.jsx)("p",{style:{color:l.isOpen?"green":"red",fontWeight:"bold"},children:l.isOpen?"営業中":"営業時間外"})]})]}):(0,r.jsx)("p",{children:"Loading Google Maps..."})}},6855:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});let r=(0,n(5974).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},2558:(t,e,n)=>{"use strict";n.d(e,{C:()=>u});var r=n(1455),i=n.n(r);n(1550);var s=n(4084),a=n.n(s);i().extend(a());let o=t=>t.replace("Sunday","日曜日").replace("Monday","月曜日").replace("Tuesday","火曜日").replace("Wednesday","水曜日").replace("Thursday","木曜日").replace("Friday","金曜日").replace("Saturday","土曜日").replace("曜日",""),u=t=>{var e,n,r,s;let a=i()().locale("ja"),u=a;6>a.hour()&&(u=a.subtract(1,"day"));let l=o(u.format("dddd")),c=o(u.add(1,"day").format("dddd")),d=a.format("HH:mm");console.log("\uD83D\uDCC6 現在の曜日: '".concat(l,"', 時刻: ").concat(d)),console.log("\uD83D\uDD0D Supabase から取得した営業時間のデータ:",t);let f={};t.split("\n").forEach(t=>{let e=t.match(/^(.+?曜)\s*(.+)$/);if(e&&e[1]&&e[2]){let t=e[1].trim(),n=e[2].trim();if("休み"===n)f[t]=[];else{let e=n.split(", ");f[t]=e.map(t=>{let[e,n]=t.split("〜").map(t=>t.trim());return{open:e,close:n}})}}}),console.log("\uD83D\uDDFA 営業時間マップのキー:",Object.keys(f)),console.log("\uD83D\uDD0D 検索対象:",l);let h=Object.keys(f).find(t=>t.startsWith(l));if(!h||!f.hasOwnProperty(h)||!Array.isArray(f[h])||(null===(e=f[h])||void 0===e?void 0:e.length)===0){console.warn("⚠️ '".concat(l,"' は休業日"));let t=Object.keys(f).find(t=>t.startsWith(c));return t&&f.hasOwnProperty(t)&&Array.isArray(f[t])?{isOpen:!1,nextOpening:"次の営業: ".concat(t," ").concat(null===(n=f[t][0])||void 0===n?void 0:n.open," から")}:{isOpen:!1,nextOpening:"営業情報なし"}}let p=f[h]||[];if(console.log("\uD83D\uDCC6 今日(".concat(l,") の営業時間:"),p),!p.length)return{isOpen:!1,nextOpening:"情報なし"};let m="",g=!1;for(let t of p){let e=parseInt(t.open.split(":")[0],10),n=parseInt(t.open.split(":")[1],10),r=parseInt(t.close.split(":")[0],10),i=parseInt(t.close.split(":")[1],10),s=u.set("hour",e).set("minute",n),o=u.set("hour",r).set("minute",i);if(r>=24&&(r-=24,o=u.add(1,"day").set("hour",r).set("minute",i)),console.log("\uD83D\uDD52 営業時間: ".concat(s.format("YYYY-MM-DD HH:mm")," 〜 ").concat(o.format("YYYY-MM-DD HH:mm"))),a.isBetween(s,o,null,"[)")){g=!0,m="本日 ".concat(o.format("HH:mm")," まで営業");break}}if(!g){if(6>a.hour())return{isOpen:!1,nextOpening:""};let t=p.filter(t=>i()("".concat(u.format("YYYY-MM-DD")," ").concat(t.open)).isAfter(u));if(t.length>0)m="次の営業: ".concat(l," ").concat(null===(r=t[0])||void 0===r?void 0:r.open," から");else{let t=Object.keys(f).find(t=>t.startsWith(c));t&&f[t].length>0&&(m="次の営業: ".concat(t," ").concat(null===(s=f[t][0])||void 0===s?void 0:s.open," から"))}}return{isOpen:g,nextOpening:m}}},1455:function(t){var e;e=function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",i="week",s="month",a="quarter",o="year",u="date",l="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},h="en",p={};p[h]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||"th")+"]"}};var m="$isDayjsObject",g=function(t){return t instanceof M||!(!t||!t[m])},y=function t(e,n,r){var i;if(!e)return h;if("string"==typeof e){var s=e.toLowerCase();p[s]&&(i=s),n&&(p[s]=n,i=s);var a=e.split("-");if(!i&&a.length>1)return t(a[0])}else{var o=e.name;p[o]=e,i=o}return!r&&i&&(h=i),i||!r&&h},D=function(t,e){if(g(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new M(n)},$={s:f,z:function(t){var e=-t.utcOffset(),n=Math.abs(e);return(e<=0?"+":"-")+f(Math.floor(n/60),2,"0")+":"+f(n%60,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,s),a=n-i<0,o=e.clone().add(r+(a?-1:1),s);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return({M:s,y:o,w:i,d:"day",D:u,h:r,m:n,s:e,ms:t,Q:a})[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}};$.l=y,$.i=g,$.w=function(t,e){return D(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function f(t){this.$L=y(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[m]=!0}var h=f.prototype;return h.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if($.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(c);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},h.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},h.$utils=function(){return $},h.isValid=function(){return this.$d.toString()!==l},h.isSame=function(t,e){var n=D(t);return this.startOf(e)<=n&&n<=this.endOf(e)},h.isAfter=function(t,e){return D(t)<this.startOf(e)},h.isBefore=function(t,e){return this.endOf(e)<D(t)},h.$g=function(t,e,n){return $.u(t)?this[e]:this.set(n,t)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(t,a){var l=this,c=!!$.u(a)||a,d=$.p(t),f=function(t,e){var n=$.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return c?n:n.endOf("day")},h=function(t,e){return $.w(l.toDate()[t].apply(l.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},p=this.$W,m=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case o:return c?f(1,0):f(31,11);case s:return c?f(1,m):f(0,m+1);case i:var D=this.$locale().weekStart||0,M=(p<D?p+7:p)-D;return f(c?g-M:g+(6-M),m);case"day":case u:return h(y+"Hours",0);case r:return h(y+"Minutes",1);case n:return h(y+"Seconds",2);case e:return h(y+"Milliseconds",3);default:return this.clone()}},h.endOf=function(t){return this.startOf(t,!1)},h.$set=function(i,a){var l,c=$.p(i),d="set"+(this.$u?"UTC":""),f=((l={}).day=d+"Date",l[u]=d+"Date",l[s]=d+"Month",l[o]=d+"FullYear",l[r]=d+"Hours",l[n]=d+"Minutes",l[e]=d+"Seconds",l[t]=d+"Milliseconds",l)[c],h="day"===c?this.$D+(a-this.$W):a;if(c===s||c===o){var p=this.clone().set(u,1);p.$d[f](h),p.init(),this.$d=p.set(u,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},h.set=function(t,e){return this.clone().$set(t,e)},h.get=function(t){return this[$.p(t)]()},h.add=function(t,a){var u,l=this;t=Number(t);var c=$.p(a),d=function(e){var n=D(l);return $.w(n.date(n.date()+Math.round(e*t)),l)};if(c===s)return this.set(s,this.$M+t);if(c===o)return this.set(o,this.$y+t);if("day"===c)return d(1);if(c===i)return d(7);var f=((u={})[n]=6e4,u[r]=36e5,u[e]=1e3,u)[c]||1,h=this.$d.getTime()+t*f;return $.w(h,this)},h.subtract=function(t,e){return this.add(-1*t,e)},h.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=$.z(this),s=this.$H,a=this.$m,o=this.$M,u=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},p=function(t){return $.s(s%12||12,t,"0")},m=f||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(d,function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return $.s(e.$y,4,"0");case"M":return o+1;case"MM":return $.s(o+1,2,"0");case"MMM":return h(n.monthsShort,o,c,3);case"MMMM":return h(c,o);case"D":return e.$D;case"DD":return $.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(n.weekdaysMin,e.$W,u,2);case"ddd":return h(n.weekdaysShort,e.$W,u,3);case"dddd":return u[e.$W];case"H":return String(s);case"HH":return $.s(s,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(s,a,!0);case"A":return m(s,a,!1);case"m":return String(a);case"mm":return $.s(a,2,"0");case"s":return String(e.$s);case"ss":return $.s(e.$s,2,"0");case"SSS":return $.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")})},h.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},h.diff=function(t,u,l){var c,d=this,f=$.p(u),h=D(t),p=(h.utcOffset()-this.utcOffset())*6e4,m=this-h,g=function(){return $.m(d,h)};switch(f){case o:c=g()/12;break;case s:c=g();break;case a:c=g()/3;break;case i:c=(m-p)/6048e5;break;case"day":c=(m-p)/864e5;break;case r:c=m/36e5;break;case n:c=m/6e4;break;case e:c=m/1e3;break;default:c=m}return l?c:$.a(c)},h.daysInMonth=function(){return this.endOf(s).$D},h.$locale=function(){return p[this.$L]},h.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=y(t,e,!0);return r&&(n.$L=r),n},h.clone=function(){return $.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},f}(),_=M.prototype;return D.prototype=_,[["$ms",t],["$s",e],["$m",n],["$H",r],["$W","day"],["$M",s],["$y",o],["$D",u]].forEach(function(t){_[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),D.extend=function(t,e){return t.$i||(t(e,M,D),t.$i=!0),D},D.locale=y,D.isDayjs=g,D.unix=function(t){return D(1e3*t)},D.en=p[h],D.Ls=p,D.p={},D},t.exports=e()},1550:function(t,e,n){var r;r=function(t){"use strict";var e={name:"ja",weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t){return t+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiem:function(t){return t<12?"午前":"午後"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}};return(t&&"object"==typeof t&&"default"in t?t:{default:t}).default.locale(e,null,!0),e},t.exports=r(n(1455))},4084:function(t){var e;e=function(){return function(t,e,n){e.prototype.isBetween=function(t,e,r,i){var s=n(t),a=n(e),o="("===(i=i||"()")[0],u=")"===i[1];return(o?this.isAfter(s,r):!this.isBefore(s,r))&&(u?this.isBefore(a,r):!this.isAfter(a,r))||(o?this.isBefore(s,r):!this.isAfter(s,r))&&(u?this.isAfter(a,r):!this.isBefore(a,r))}}},t.exports=e()}}]);