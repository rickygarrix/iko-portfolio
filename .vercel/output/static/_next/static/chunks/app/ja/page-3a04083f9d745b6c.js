(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7010],{177:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),l=s(5561);function i(){return(0,a.jsx)(l.P.div,{className:"fixed inset-0 z-[9999] bg-white/80 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}},665:(e,t,s)=>{Promise.resolve().then(s.bind(s,7905))},7905:(e,t,s)=>{"use strict";s.d(t,{default:()=>S});var a=s(5155),l=s(6096),i=s(2115),n=s(5695),r=s(3168),c=s(3999),o=s(653),d=s(6766),m=s(3385);function u(e,t){return(...e)=>{try{return t(...e)}catch{throw Error(void 0)}}}let x=u(0,m.c3);u(0,m.kc);var p=s(177),h=s(5561);function f(){let e=x(),t=(0,m.Ym)(),s=(0,n.useRouter)(),[l,r]=(0,i.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsx)(p.A,{}),(0,a.jsx)("section",{className:"w-full bg-[#4B5C9E] text-white flex justify-center",children:(0,a.jsxs)("div",{className:"w-full max-w-[1400px] px-4 py-10 flex flex-col items-center gap-3",children:[(0,a.jsx)(h.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4},className:"relative w-32 h-10",children:(0,a.jsx)(d.default,{src:"/footer/logo.svg",alt:e("about.logo_alt"),fill:!0,className:"object-contain",priority:!0})}),(0,a.jsx)("p",{className:"text-sm font-semibold leading-tight tracking-wider",children:e("about.subtitle")}),(0,a.jsx)("p",{className:"w-full py-4 max-w-[600px] text-sm font-light leading-relaxed text-center",children:e("about.description")}),(0,a.jsx)("button",{onClick:()=>{r(!0),setTimeout(()=>{s.push("/".concat(t,"/search")),setTimeout(()=>r(!1),800)},200)},className:"w-full max-w-[600px] h-12 px-4 bg-zinc-900 rounded-lg border border-zinc-900 flex items-center justify-center cursor-pointer transition-transform duration-200 text-white text-sm font-medium",children:e("about.button")})]})})]})}var g=s(4943),j=s(3256),v=s(706);function w(e){let{messages:t}=e,[s,l]=(0,i.useState)([]),[o,d]=(0,i.useState)({}),[m,u]=(0,i.useState)({}),[x,p]=(0,i.useState)({}),[h,f]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!1),[b,N]=(0,i.useState)(!1),_=(0,n.useRouter)(),S=(0,n.usePathname)(),k=null!=S?S:"/",E=k.split("/")[1]||"ja",O="recommendedScrollY";(0,i.useLayoutEffect)(()=>{let e=sessionStorage.getItem(O);e&&k==="/".concat(E)&&window.scrollTo(0,parseInt(e,10)),f(!0)},[k,E]),(0,i.useEffect)(()=>{(async()=>{let[{data:e},{data:t},{data:s}]=await Promise.all([r.N.from("stores").select("*").eq("is_published",!0).eq("is_recommended",!0).limit(3),r.N.from("genre_translations").select("genre_id, name").eq("locale",E),r.N.from("area_translations").select("area_id, name").eq("locale",E)]);e&&l(e),t&&u(Object.fromEntries(t.map(e=>[e.genre_id,e.name]))),s&&p(Object.fromEntries(s.map(e=>[e.area_id,e.name]))),y(!0),sessionStorage.removeItem(O)})()},[E]),(0,i.useEffect)(()=>{"ja"!==E&&(async()=>{let e={};for(let t of s)if(t.description)try{e[t.id]=await (0,g.s)(t.description,E)}catch(s){e[t.id]=t.description}d(e)})()},[s,E]);let C=async e=>{sessionStorage.setItem(O,window.scrollY.toString()),N(!0);try{await (0,c.d5)("click_recommended_store",{store_id:e,locale:E})}catch(e){}_.push("/stores/".concat(e))};return h&&w?(0,a.jsxs)("div",{className:"w-full bg-white flex justify-center pt-8 relative",style:{minHeight:"100vh"},children:[b&&(0,a.jsx)("div",{className:"fixed inset-0 z-[9999] bg-white/80"}),(0,a.jsxs)("div",{className:"w-full max-w-[600px] flex flex-col mx-auto gap-2",children:[(0,a.jsxs)("div",{className:"w-full px-4 flex flex-col items-center gap-1",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-zinc-900",children:t.title}),(0,a.jsx)("p",{className:"text-xs text-slate-500 font-bold",children:t.subtitle})]}),(0,a.jsx)("div",{className:"w-full flex flex-col items-center gap-4 px-4",children:s.map(e=>(0,a.jsx)(j.A,{store:{...e,areaTranslated:x[e.area_id]},locale:E,index:0,genresMap:m,translatedDescription:o[e.id],messages:t,onClick:()=>C(e.id),onMapClick:t=>{var s,a;t.stopPropagation(),(0,v.J)("click_recommend_map",{store_id:e.id,store_name:e.name,latitude:null!=(s=e.latitude)?s:void 0,longitude:null!=(a=e.longitude)?a:void 0})}},e.id))})]})]}):(0,a.jsx)("div",{style:{height:"100vh",backgroundColor:"white"}})}var y=s(6072),b=s(4653);let N=async(e,t,s,a)=>{let l=r.N.from("stores").select("*").eq("is_published",!0);e.length>0&&(l=l.filter("genre_ids","cs",JSON.stringify(e))),t.length>0&&(l=l.in("area_id",t)),s.length>0&&(l=l.overlaps("payment_method_ids",s));let{data:i,error:n}=await l;return n||!i?(console.error("\uD83D\uDD25 Supabase Error:",null==n?void 0:n.message),0):(a?i.filter(e=>(0,c.CW)(e.opening_hours).isOpen):i).length};function _(e){let{messages:t,locale:s}=e,l=(0,n.useRouter)(),[r,c]=(0,i.useState)([]),[m,u]=(0,i.useState)([]),[x,p]=(0,i.useState)([]),[h,g]=(0,i.useState)(!1),{data:j}=(0,y.Ay)(["previewCountHome",r,m,x,h],e=>{let[,t,s,a,l]=e;return N(t,s,a,l)},{revalidateOnFocus:!1});return(0,a.jsxs)("div",{className:"min-h-screen bg-[#F7F5EF] text-gray-800 pt-[70px]",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("p",{className:"text-xs font-light text-[#1F1F21] leading-none",children:t.top.catchphrase}),(0,a.jsx)("div",{className:"relative w-[121px] h-[40px] mx-auto",children:(0,a.jsx)(d.default,{src:"/header/logo.svg",alt:"".concat(t.top.title," ロゴ"),fill:!0,className:"object-contain",priority:!0})})]}),(0,a.jsx)("div",{id:"search-filter",className:"mt-6",children:(0,a.jsx)(o.A,{selectedGenres:r,setSelectedGenres:c,selectedAreas:m,setSelectedAreas:u,selectedPayments:x,setSelectedPayments:p,showOnlyOpen:h,setShowOnlyOpen:g,handleSearch:()=>{let e=new URLSearchParams;r.length>0&&e.append("genre",r.join(",")),m.length>0&&e.append("area",m.join(",")),x.length>0&&e.append("payment",x.join(",")),h&&e.append("open","true"),""===e.toString()&&e.set("all","true"),l.push("/".concat(s,"/search?").concat(e.toString()))},previewCount:null!=j?j:0,showTitle:!1,messages:{...t.searchFilter,genres:t.genres,payments:t.payments,areas:t.areas}})}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(w,{messages:t.recommend})}),(0,a.jsxs)("div",{className:"mt-0",children:[(0,a.jsx)(f,{}),(0,a.jsx)(b.A,{messages:t.searchFilter,genres:t.genres,areas:t.areas})]})]})}function S(e){let{locale:t,messages:s}=e;return(0,a.jsxs)(l.default,{locale:t,messages:s,children:[(0,a.jsx)(_,{messages:s,locale:t})," "]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,4212,5561,6096,6072,5576,7991,8441,1684,7358],()=>t(665)),_N_E=e.O()}]);