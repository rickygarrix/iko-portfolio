(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8634],{3168:(e,t,l)=>{"use strict";l.d(t,{N:()=>s});let s=(0,l(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},4435:(e,t,l)=>{"use strict";l.d(t,{Y:()=>s});let s=[{key:"cash",label:"現金"},{key:"credit",label:"クレジットカード"},{key:"e_money",label:"電子マネー"},{key:"qr",label:"QRコード決済"},{key:"other",label:"その他"}]},6222:(e,t,l)=>{Promise.resolve().then(l.bind(l,8295))},6224:(e,t,l)=>{"use strict";l.d(t,{D:()=>s});let s=[{key:"EDM",label:"EDM"},{key:"house",label:"ハウス"},{key:"techno",label:"テクノ"},{key:"hiphop",label:"ヒップホップ"},{key:"jazz",label:"ジャズ"},{key:"other",label:"その他"}]},7850:(e,t,l)=>{"use strict";l.d(t,{x:()=>s});let s=[{key:"shibuya",label:"渋谷"},{key:"shinjuku",label:"新宿"},{key:"roppongi",label:"六本木"},{key:"ginza",label:"銀座"},{key:"ikebukuro",label:"池袋"},{key:"omotesando",label:"表参道"},{key:"ueno",label:"上野"},{key:"yokohama",label:"横浜"}]},8295:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>m});var s=l(5155),a=l(2115),r=l(5695),n=l(3168),i=l(6766),u=l(6224),c=l(7850),o=l(4435);let d=["月曜","火曜","水曜","木曜","金曜","土曜","日曜"];function m(){var e,t;let l=(0,r.useRouter)(),m=null!=(t=null==(e=(0,r.useParams)())?void 0:e.id)?t:"",[g,j]=(0,a.useState)(!0),[y,v]=(0,a.useState)(""),[k,N]=(0,a.useState)(""),[f,I]=(0,a.useState)(""),[S,w]=(0,a.useState)(""),[C,_]=(0,a.useState)(""),[J,V]=(0,a.useState)(Array(7).fill("")),[U,z]=(0,a.useState)(Array(7).fill("")),[E,F]=(0,a.useState)(""),[O,A]=(0,a.useState)(""),[D,M]=(0,a.useState)([]),[X,H]=(0,a.useState)(""),[L,Q]=(0,a.useState)(""),[q,Z]=(0,a.useState)(""),[B,R]=(0,a.useState)(""),[W,Y]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=async()=>{let e=sessionStorage.getItem("editStoreData");if(e){P(JSON.parse(e)),j(!1);return}let{data:t,error:l}=await n.N.from("stores").select("*").eq("id",m).single();l||!t?console.error("取得エラー:",l):P({name:t.name,genre:t.genre,area:t.area,address:t.address,phone:t.phone,openingHoursList:T(t.opening_hours),websiteUrl:t.website,instagramUrl:t.instagram,paymentMethods:t.payment_methods||[],description:t.description,imageUrl:t.image_url,storeInstagram1:t.store_instagrams||"",storeInstagram2:t.store_instagrams2||"",storeInstagram3:t.store_instagrams3||""}),j(!1)};m&&e()},[m]);let P=e=>{var t,l,s,a,r,n,i,u,c,o,d,m,x,p,b;v(null!=(s=e.name)?s:""),N(null!=(a=e.genre)?a:""),I(null!=(r=e.area)?r:""),w(null!=(n=e.address)?n:""),_(null!=(i=e.phone)?i:"");let h=(null==(t=e.openingHoursList)?void 0:t.map(e=>{var t;return null!=(t=null==e?void 0:e.split("~")[0])?t:""}))||Array(7).fill(""),g=(null==(l=e.openingHoursList)?void 0:l.map(e=>{var t;return null!=(t=null==e?void 0:e.split("~")[1])?t:""}))||Array(7).fill("");V(h),z(g),F(null!=(u=e.websiteUrl)?u:""),A(null!=(c=e.instagramUrl)?c:""),M(null!=(o=e.paymentMethods)?o:[]),H(null!=(d=e.description)?d:""),Q(null!=(m=e.imageUrl)?m:""),Z(null!=(x=e.storeInstagram1)?x:""),R(null!=(p=e.storeInstagram2)?p:""),Y(null!=(b=e.storeInstagram3)?b:"")},T=e=>{let t=e.split("\n").filter(e=>e.trim());return d.map(e=>{let l=t.find(t=>t.startsWith(e));return l?l.slice(e.length+1).trim():""})},G=e=>!e||/^[0-9]{1,2}:[0-9]{2}$/.test(e),$=e=>{let t=[...J],l=[...U];t[e]="",l[e]="",V(t),z(l)},K=e=>{let t=[...J],l=[...U];t[e]="休み",l[e]="",V(t),z(l)};return g?(0,s.jsx)("div",{className:"text-center p-10",children:"読み込み中..."}):(0,s.jsxs)("div",{className:"min-h-screen bg-[#FEFCF6] pt-24 px-10 pb-10 text-gray-800",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-8",children:"店舗情報編集"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(x,{label:"店舗名",value:y,setValue:v}),(0,s.jsx)(b,{label:"ジャンル",options:u.D,selected:k,setSelected:N}),(0,s.jsx)(b,{label:"エリア",options:c.x,selected:f,setSelected:I}),(0,s.jsx)(x,{label:"住所",value:S,setValue:w}),(0,s.jsx)(x,{label:"電話番号",value:C,setValue:_}),(0,s.jsx)(x,{label:"公式サイト",value:E,setValue:F}),(0,s.jsx)(x,{label:"Instagramアカウント",value:O,setValue:A}),(0,s.jsx)(h,{label:"支払い方法",options:o.Y,selected:D,setSelected:M}),(0,s.jsx)(x,{label:"Instagram投稿リンク1",value:q,setValue:Z}),(0,s.jsx)(x,{label:"Instagram投稿リンク2",value:B,setValue:R}),(0,s.jsx)(x,{label:"Instagram投稿リンク3",value:W,setValue:Y}),(0,s.jsx)(p,{label:"店舗説明",value:X,setValue:H}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"営業時間"}),d.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("div",{className:"w-12",children:e}),"休み"===J[t]?(0,s.jsxs)("div",{className:"text-red-500 flex items-center",children:["休み",(0,s.jsx)("button",{onClick:()=>$(t),className:"ml-2 text-sm text-blue-600 underline",children:"クリア"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",value:J[t]||"",onChange:e=>{let l=[...J];l[t]=e.target.value,V(l)},className:"border p-2 rounded w-20 ".concat(G(J[t])?"":"border-red-500"),placeholder:"18:00"}),(0,s.jsx)("span",{children:"~"}),(0,s.jsx)("input",{type:"text",value:U[t]||"",onChange:e=>{let l=[...U];l[t]=e.target.value,z(l)},className:"border p-2 rounded w-20 ".concat(G(U[t])?"":"border-red-500"),placeholder:"28:00"}),(0,s.jsx)("button",{onClick:()=>K(t),className:"ml-2 text-sm text-blue-600 underline",children:"休み"})]})]},t))]}),L&&(0,s.jsx)("div",{className:"relative w-full max-w-xs h-60 mx-auto mb-4 rounded overflow-hidden border",children:(0,s.jsx)(i.default,{src:L,alt:"店舗画像",fill:!0,style:{objectFit:"cover"},sizes:"100%",unoptimized:!0})}),(0,s.jsxs)("div",{className:"space-y-4 mt-8",children:[(0,s.jsx)("button",{onClick:()=>l.push("/admin/stores/".concat(m)),className:"w-full bg-gray-500 text-white rounded p-3 hover:bg-gray-600",children:"戻る"}),(0,s.jsx)("button",{onClick:()=>{let e=J.map((e,t)=>{let l=U[t];return"休み"!==e&&e&&l?"".concat(d[t]," ").concat(e,"~").concat(l):"".concat(d[t]," 休み")});sessionStorage.setItem("editStoreData",JSON.stringify({name:y,genre:k,area:f,address:S,phone:C,openingHoursList:e,websiteUrl:E,instagramUrl:O,paymentMethods:D,description:X,imageUrl:L,storeInstagram1:q,storeInstagram2:B,storeInstagram3:W})),l.push("/admin/stores/".concat(m,"/confirm"))},className:"w-full bg-[#1F1F21] text-white rounded p-3 hover:bg-[#333]",children:"確認する"})]})]})]})}function x(e){let{label:t,value:l,setValue:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>a(e.target.value),className:"w-full border p-2 rounded"})]})}function p(e){let{label:t,value:l,setValue:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t}),(0,s.jsx)("textarea",{value:l,onChange:e=>a(e.target.value),className:"w-full border p-2 rounded",rows:5})]})}function b(e){let{label:t,options:l,selected:a,setSelected:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:l.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:t,value:e.key,checked:a===e.key,onChange:e=>r(e.target.value)}),e.label]},e.key))})]})}function h(e){let{label:t,options:l,selected:a,setSelected:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:l.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",value:e.key,checked:a.includes(e.key),onChange:t=>{r(t.target.checked?[...a,e.key]:a.filter(t=>t!==e.key))}}),e.label]},e.key))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[851,4212,8441,1684,7358],()=>t(6222)),_N_E=e.O()}]);