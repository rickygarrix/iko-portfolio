(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6265],{3168:(e,s,t)=>{"use strict";t.d(s,{N:()=>r});let r=(0,t(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"notFound")&&t.d(s,{notFound:function(){return r.notFound}}),t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},7585:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5155),a=t(2115),n=t(5695),c=t(3168);function i(e){let{id:s}=e,t=(0,n.useRouter)(),a=async()=>{if(!window.confirm("この店舗を復元しますか？"))return;let{error:e}=await c.N.from("stores").update({is_deleted:!1}).eq("id",s);if(e){console.error("復元エラー:",e.message),alert("復元に失敗しました");return}alert("復元しました！"),t.refresh()};return(0,r.jsx)("button",{onClick:a,className:"bg-blue-500 text-white font-semibold rounded px-3 py-1 hover:bg-blue-600",children:"復元"})}function l(e){let{id:s}=e,t=(0,n.useRouter)(),a=async()=>{if(!window.confirm("この店舗を完全に削除しますか？（※復元できなくなります）"))return;let{error:e}=await c.N.from("stores").delete().eq("id",s);if(e){console.error("完全削除エラー:",e.message),alert("完全削除に失敗しました");return}alert("完全に削除しました！"),t.refresh()};return(0,r.jsx)("button",{onClick:a,className:"bg-red-500 text-white font-semibold rounded px-3 py-1 hover:bg-red-600",children:"完全削除"})}function d(){let e=(0,n.useRouter)(),[s,t]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[o,m]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{let{data:{user:s}}=await c.N.auth.getUser();if(!s){alert("ログインが必要です"),e.push("/login");return}if("chloerickyc@gmail.com"!==s.email){alert("アクセス権限がありません"),e.push("/");return}m(!0)})()},[e]),(0,a.useEffect)(()=>{(async()=>{let{data:e,error:s}=await c.N.from("stores").select("id, name, genre").eq("is_deleted",!0);s?console.error("取得エラー:",s.message):t(e||[]),u(!1)})()},[]),null===o)?(0,r.jsx)("div",{className:"text-center p-10 text-gray-800",children:"認証確認中..."}):d?(0,r.jsx)("div",{className:"text-center p-10 text-gray-800",children:"読み込み中..."}):(0,r.jsxs)("div",{className:"min-h-screen bg-[#FEFCF6] pt-24 px-10 pb-20 text-gray-800",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"削除済み店舗一覧"}),0===s.length?(0,r.jsx)("p",{className:"text-center text-gray-500 mb-10",children:"削除済み店舗はありません。"}):(0,r.jsx)("div",{className:"overflow-x-auto mb-10",children:(0,r.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100 text-gray-700",children:[(0,r.jsx)("th",{className:"py-2 px-4 border",children:"店名"}),(0,r.jsx)("th",{className:"py-2 px-4 border",children:"ジャンル"}),(0,r.jsx)("th",{className:"py-2 px-4 border",children:"操作"})]})}),(0,r.jsx)("tbody",{children:s.map(e=>(0,r.jsxs)("tr",{className:"text-center",children:[(0,r.jsx)("td",{className:"py-2 px-4 border",children:e.name}),(0,r.jsx)("td",{className:"py-2 px-4 border",children:e.genre}),(0,r.jsxs)("td",{className:"py-2 px-4 border space-x-2",children:[(0,r.jsx)(i,{id:e.id}),(0,r.jsx)(l,{id:e.id})]})]},e.id))})]})}),(0,r.jsx)("div",{className:"flex justify-center mt-8",children:(0,r.jsx)("button",{onClick:()=>e.push("/admin"),className:"bg-gray-600 text-white py-2 px-6 rounded hover:bg-gray-700",children:"管理画面トップに戻る"})})]})}},7889:(e,s,t)=>{Promise.resolve().then(t.bind(t,7585))}},e=>{var s=s=>e(e.s=s);e.O(0,[851,8441,1684,7358],()=>s(7889)),_N_E=e.O()}]);