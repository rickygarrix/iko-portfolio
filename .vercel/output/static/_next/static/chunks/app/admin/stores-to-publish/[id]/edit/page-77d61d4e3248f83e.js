(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9096],{3168:(e,t,l)=>{"use strict";l.d(t,{N:()=>s});let s=(0,l(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},4435:(e,t,l)=>{"use strict";l.d(t,{Y:()=>s});let s=[{key:"cash",label:"現金"},{key:"credit",label:"クレジットカード"},{key:"e_money",label:"電子マネー"},{key:"qr",label:"QRコード決済"},{key:"other",label:"その他"}]},4976:(e,t,l)=>{Promise.resolve().then(l.bind(l,6431))},6224:(e,t,l)=>{"use strict";l.d(t,{D:()=>s});let s=[{key:"EDM",label:"EDM"},{key:"house",label:"ハウス"},{key:"techno",label:"テクノ"},{key:"hiphop",label:"ヒップホップ"},{key:"jazz",label:"ジャズ"},{key:"other",label:"その他"}]},6431:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>m});var s=l(5155),a=l(2115),r=l(5695),n=l(3168),i=l(6224),u=l(7850),c=l(4435),d=l(6766);let o=["月曜","火曜","水曜","木曜","金曜","土曜","日曜"];function m(){var e,t;let l=(0,r.useRouter)(),m=null!=(t=null==(e=(0,r.useParams)())?void 0:e.id)?t:"",[g,j]=(0,a.useState)(!0),[y,v]=(0,a.useState)(""),[k,N]=(0,a.useState)(""),[f,I]=(0,a.useState)(""),[S,w]=(0,a.useState)(""),[C,_]=(0,a.useState)(""),[J,V]=(0,a.useState)(Array(7).fill("")),[U,z]=(0,a.useState)(Array(7).fill("")),[E,F]=(0,a.useState)(""),[O,A]=(0,a.useState)(""),[D,M]=(0,a.useState)([]),[X,q]=(0,a.useState)(""),[H,L]=(0,a.useState)(""),[Q,Z]=(0,a.useState)(""),[B,R]=(0,a.useState)(""),[W,Y]=(0,a.useState)(""),P=e=>{let t=[...J],l=[...U];t[e]="",l[e]="",V(t),z(l)},T=e=>!e||/^[0-9]{1,2}:[0-9]{2}$/.test(e),G=e=>{var t,l,s,a,r,n,i,u,c,d,o,m,x,p,b;v(null!=(s=e.name)?s:""),N(null!=(a=e.genre)?a:""),I(null!=(r=e.area)?r:""),w(null!=(n=e.address)?n:""),_(null!=(i=e.phone)?i:"");let h=(null==(t=e.openingHoursList)?void 0:t.map(e=>e.split("〜")[0]))||Array(7).fill(""),g=(null==(l=e.openingHoursList)?void 0:l.map(e=>e.split("〜")[1]))||Array(7).fill("");V(h),z(g),F(null!=(u=e.websiteUrl)?u:""),A(null!=(c=e.instagramUrl)?c:""),M(null!=(d=e.paymentMethods)?d:[]),q(null!=(o=e.description)?o:""),L(null!=(m=e.imageUrl)?m:""),Z(null!=(x=e.storeInstagram1)?x:""),R(null!=(p=e.storeInstagram2)?p:""),Y(null!=(b=e.storeInstagram3)?b:"")};(0,a.useEffect)(()=>{let e=async()=>{let e=sessionStorage.getItem("editStoreData");if(e){G(JSON.parse(e)),j(!1);return}let{data:t,error:l}=await n.N.from("stores").select("*").eq("id",m).eq("is_published",!1).single();l||!t?console.error("取得エラー:",l):G({name:t.name,genre:t.genre,area:t.area,address:t.address,phone:t.phone,openingHoursList:$(t.opening_hours),websiteUrl:t.website,instagramUrl:t.instagram,paymentMethods:t.payment_methods||[],description:t.description,imageUrl:t.image_url,storeInstagram1:t.store_instagrams||"",storeInstagram2:t.store_instagrams2||"",storeInstagram3:t.store_instagrams3||""}),j(!1)};m&&e()},[m]);let $=e=>{let t=e.split("\n").filter(e=>e.trim());return o.map(e=>{let l=t.find(t=>t.startsWith(e));return l?l.slice(e.length+1).trim():""})},K=e=>{let t=[...J],l=[...U];t[e]="休み",l[e]="",V(t),z(l)};return g?(0,s.jsx)("div",{className:"text-center p-10",children:"読み込み中..."}):(0,s.jsxs)("div",{className:"min-h-screen bg-[#FEFCF6] pt-24 px-10 pb-10 text-gray-800",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-8",children:"未公開店舗編集"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(x,{label:"店舗名",value:y,setValue:v}),(0,s.jsx)(b,{label:"ジャンル",options:i.D,selected:k,setSelected:N}),(0,s.jsx)(b,{label:"エリア",options:u.x,selected:f,setSelected:I}),(0,s.jsx)(x,{label:"住所",value:S,setValue:w}),(0,s.jsx)(x,{label:"電話番号",value:C,setValue:_}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"営業時間"}),o.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("div",{className:"w-12",children:e}),"休み"===J[t]?(0,s.jsxs)("div",{className:"text-red-500 flex items-center",children:["休み",(0,s.jsx)("button",{onClick:()=>P(t),className:"ml-2 text-sm text-blue-600 underline",children:"クリア"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",value:J[t]||"",onChange:e=>{let l=[...J];l[t]=e.target.value,V(l)},className:"border p-2 rounded w-20 ".concat(T(J[t])?"":"border-red-500"),placeholder:"18:00"}),(0,s.jsx)("span",{children:"〜"}),(0,s.jsx)("input",{type:"text",value:U[t]||"",onChange:e=>{let l=[...U];l[t]=e.target.value,z(l)},className:"border p-2 rounded w-20 ".concat(T(U[t])?"":"border-red-500"),placeholder:"28:00"}),(0,s.jsx)("button",{onClick:()=>K(t),className:"ml-2 text-sm text-blue-600 underline",children:"休み"})]})]},t))]}),(0,s.jsx)(h,{label:"支払い方法",options:c.Y,selected:D,setSelected:M}),(0,s.jsx)(x,{label:"公式サイト",value:E,setValue:F}),(0,s.jsx)(x,{label:"Instagramアカウント",value:O,setValue:A}),(0,s.jsx)(x,{label:"Instagram投稿リンク1",value:Q,setValue:Z}),(0,s.jsx)(x,{label:"Instagram投稿リンク2",value:B,setValue:R}),(0,s.jsx)(x,{label:"Instagram投稿リンク3",value:W,setValue:Y}),(0,s.jsx)(p,{label:"店舗説明",value:X,setValue:q}),H&&(0,s.jsx)("div",{className:"relative w-full max-w-xs h-60 mx-auto mb-4 rounded overflow-hidden border",children:(0,s.jsx)(d.default,{src:H,alt:"店舗画像",fill:!0,style:{objectFit:"cover"},sizes:"100%",unoptimized:!0})}),(0,s.jsxs)("div",{className:"space-y-4 mt-8",children:[(0,s.jsx)("button",{onClick:()=>l.push("/admin/stores-to-publish"),className:"w-full bg-gray-500 text-white rounded p-3 hover:bg-gray-600",children:"詳細画面に戻る"}),(0,s.jsx)("button",{onClick:()=>{let e=J.map((e,t)=>{let l=U[t];return"休み"!==e&&e&&l?"".concat(o[t]," ").concat(e,"〜").concat(l):"".concat(o[t]," 休み")});sessionStorage.setItem("editStoreData",JSON.stringify({name:y,genre:k,area:f,address:S,phone:C,openingHoursList:e,websiteUrl:E,instagramUrl:O,paymentMethods:D,description:X,imageUrl:H,storeInstagram1:Q,storeInstagram2:B,storeInstagram3:W}))},className:"w-full bg-[#1F1F21] text-white rounded p-3 hover:bg-[#333]",children:"確認する"})]})]})]})}function x(e){let{label:t,value:l,setValue:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>a(e.target.value),className:"w-full border p-2 rounded"})]})}function p(e){let{label:t,value:l,setValue:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t}),(0,s.jsx)("textarea",{value:l,onChange:e=>a(e.target.value),className:"w-full border p-2 rounded",rows:5})]})}function b(e){let{label:t,options:l,selected:a,setSelected:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:l.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:t,value:e.key,checked:a===e.key,onChange:e=>r(e.target.value)}),e.label]},e.key))})]})}function h(e){let{label:t,options:l,selected:a,setSelected:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:l.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",value:e.key,checked:a.includes(e.key),onChange:t=>{r(t.target.checked?[...a,e.key]:a.filter(t=>t!==e.key))}}),e.label]},e.key))})]})}},7850:(e,t,l)=>{"use strict";l.d(t,{x:()=>s});let s=[{key:"shibuya",label:"渋谷"},{key:"shinjuku",label:"新宿"},{key:"roppongi",label:"六本木"},{key:"ginza",label:"銀座"},{key:"ikebukuro",label:"池袋"},{key:"omotesando",label:"表参道"},{key:"ueno",label:"上野"},{key:"yokohama",label:"横浜"}]}},e=>{var t=t=>e(e.s=t);e.O(0,[851,4212,8441,1684,7358],()=>t(4976)),_N_E=e.O()}]);