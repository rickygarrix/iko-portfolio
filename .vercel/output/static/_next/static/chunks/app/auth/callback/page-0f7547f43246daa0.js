(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6769],{2557:(e,s,t)=>{Promise.resolve().then(t.bind(t,7759))},3168:(e,s,t)=>{"use strict";t.d(s,{N:()=>a});let a=(0,t(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"notFound")&&t.d(s,{notFound:function(){return a.notFound}}),t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},7759:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var a=t(5155),r=t(2115),u=t(5695),n=t(3168);function i(){var e;let s=(0,u.useRouter)(),t=(0,u.useSearchParams)(),i=null!=(e=(null!=t?t:new URLSearchParams).get("mode"))?e:"login";return(0,r.useEffect)(()=>{(async()=>{var e;let{data:t}=await n.N.auth.getSession(),a=null==(e=t.session)?void 0:e.user;if(!a){alert("ログイン情報が取得できませんでした"),s.push("/login");return}let r=a.id,{data:u,error:o}=await n.N.from("user_profiles").select("id").eq("id",r).single();if(o&&"PGRST116"!==o.code){console.error("プロフィール取得エラー:",o.message),alert("サーバーエラーが発生しました"),await n.N.auth.signOut(),s.push("/login");return}if("login"===i&&(u?s.push("/mypage"):(alert("このアカウントは存在しません。"),await n.N.auth.signOut(),s.push("/login"))),"signup"===i)if(u)alert("すでにアカウントがあります。ログインしてください。"),await n.N.auth.signOut(),s.push("/login");else{let{error:e}=await n.N.from("user_profiles").insert({id:r,name:""});if(e){console.error("プロフィール作成失敗:",e.message),alert("プロフィールの作成に失敗しました"),await n.N.auth.signOut(),s.push("/signup");return}s.push("/onboarding")}})()},[s,i]),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-xl text-gray-800",children:"ログイン処理中..."})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[851,8441,1684,7358],()=>s(2557)),_N_E=e.O()}]);