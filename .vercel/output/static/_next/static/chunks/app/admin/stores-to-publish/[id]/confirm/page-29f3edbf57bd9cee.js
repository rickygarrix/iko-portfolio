(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{706:(e,s,t)=>{"use strict";t.d(s,{J:()=>a});let a=(e,s)=>{"function"==typeof window.gtag&&window.gtag("event",e,s||{})}},1677:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(5155),r=t(2115),i=t(5695),n=t(3168),l=t(6766),o=t(4990);let c=["月曜","火曜","水曜","木曜","金曜","土曜","日曜"];function d(){var e,s;let t=(0,i.useRouter)(),d=null!=(s=null==(e=(0,i.useParams)())?void 0:e.id)?s:"",[u,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=sessionStorage.getItem("editStoreData");e&&p(JSON.parse(e))},[]);let x=e=>e.map((e,s)=>e.startsWith(c[s])?e:e.startsWith(c[s][0])?"".concat(c[s]," ").concat(e.slice(1).trim()):"".concat(c[s]," ").concat(e.trim())).join("\n"),g=async()=>{if(!u)return;let{error:e}=await n.N.from("stores").update({name:u.name,genre:u.genre,area:u.area,address:u.address,phone_number:u.phone,opening_hours:x(u.openingHoursList),website:u.websiteUrl,instagram:u.instagramUrl,payment_methods:u.paymentMethods,description:u.description,image_url:u.imageUrl,store_instagrams:u.storeInstagram1,store_instagrams2:u.storeInstagram2,store_instagrams3:u.storeInstagram3,is_published:!0}).eq("id",d);if(e)return void alert("保存に失敗しました");alert("保存＆公開しました！"),sessionStorage.removeItem("editStoreData"),t.push("/admin/stores-to-publish")};return u?(0,a.jsxs)("div",{className:"min-h-screen bg-[#FEFCF6] pt-24 px-10 pb-10 text-gray-800",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center mb-8",children:"未公開店舗 確認画面"}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,a.jsx)(m,{label:"店舗名",value:u.name}),(0,a.jsx)(m,{label:"ジャンル",value:u.genre}),(0,a.jsx)(m,{label:"エリア",value:u.area}),(0,a.jsx)(m,{label:"住所",value:u.address}),(0,a.jsx)(m,{label:"電話番号",value:u.phone}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"営業時間"}),(0,a.jsx)("p",{className:"text-lg whitespace-pre-line",children:x(u.openingHoursList)})]}),(0,a.jsx)(m,{label:"公式サイト",value:u.websiteUrl,isLink:!0}),(0,a.jsx)(m,{label:"Instagramアカウント",value:u.instagramUrl,isLink:!0}),(0,a.jsx)(m,{label:"支払い方法",value:u.paymentMethods.join(", ")}),(0,a.jsx)(m,{label:"説明",value:u.description}),u.imageUrl&&(0,a.jsx)("div",{className:"flex justify-center mt-6",children:(0,a.jsx)(l.default,{src:u.imageUrl,alt:"店舗画像",width:400,height:300,className:"rounded shadow"})}),(0,a.jsx)(o.A,{posts:[u.storeInstagram1,u.storeInstagram2,u.storeInstagram3].filter(e=>!!e)}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-10",children:[(0,a.jsx)("button",{onClick:()=>t.push("/admin/stores-to-publish/".concat(d,"/edit")),className:"bg-gray-500 text-white py-2 px-6 rounded hover:bg-gray-600",children:"編集に戻る"}),(0,a.jsx)("button",{onClick:g,className:"bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600",children:"公開する"})]})]})]}):(0,a.jsx)("div",{className:"text-center p-10",children:"データが見つかりませんでした"})}function m(e){let{label:s,value:t,isLink:r}=e;return t?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s}),r?(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline break-words",children:t}):(0,a.jsx)("p",{className:"text-lg break-words",children:t})]}):null}},3168:(e,s,t)=>{"use strict";t.d(s,{N:()=>a});let a=(0,t(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},4100:(e,s,t)=>{Promise.resolve().then(t.bind(t,1677))},4990:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(5155),r=t(9137),i=t.n(r),n=t(2115),l=t(7677),o=t(7269);t(2252),t(9408),t(6970);var c=t(706);function d(e){let{posts:s,onClickPost:t}=e;return((0,n.useEffect)(()=>{if(!document.getElementById("instagram-embed-script")){let e=document.createElement("script");e.id="instagram-embed-script",e.src="https://www.instagram.com/embed.js",e.async=!0,e.onerror=()=>{console.warn("Instagram embed script failed to load.")},document.body.appendChild(e)}},[]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{try{var e,s;null==(s=window.instgrm)||null==(e=s.Embeds)||e.process()}catch(e){console.warn("Instagram Embed error:",e)}},500);return()=>clearTimeout(e)},[s]),0===s.length)?null:(0,a.jsxs)("div",{className:"jsx-31a727e351345d87 w-full px-4 pb-8 relative",children:[(0,a.jsxs)("p",{className:"jsx-31a727e351345d87 text-base mb-2 flex items-center gap-2 font-[#1F1F21]",children:[(0,a.jsx)("span",{className:"jsx-31a727e351345d87 w-[12px] h-[12px] bg-[#4B5C9E] rounded-[2px] inline-block"}),"Instagram"]}),(0,a.jsx)(l.RC,{slidesPerView:1,spaceBetween:10,navigation:!0,loop:!0,pagination:{clickable:!0},grabCursor:!0,simulateTouch:!0,touchStartPreventDefault:!1,modules:[o.Vx,o.dK],className:"w-full rounded-lg instagram-slider",children:s.map((e,s)=>(0,a.jsx)(l.qr,{children:(0,a.jsx)("div",{className:"jsx-31a727e351345d87 w-full aspect-square rounded-lg overflow-hidden",children:(0,a.jsx)("div",{onClick:async s=>{s.stopPropagation();try{(0,c.J)("click_instagram",{instagram_url:e}),await new Promise(e=>setTimeout(e,300)),t&&await t(e)}finally{window.open(e,"_blank","noopener,noreferrer")}},className:"jsx-31a727e351345d87 block w-full h-full cursor-pointer",children:(0,a.jsx)("blockquote",{"data-instgrm-permalink":e,"data-instgrm-version":"14",style:{width:"100%",height:"100%",margin:0},className:"jsx-31a727e351345d87 instagram-media"})})})},s))}),(0,a.jsx)(i(),{id:"31a727e351345d87",children:".instagram-slider .swiper-button-prev,.instagram-slider .swiper-button-next{color:white;width:32px;height:32px;background:rgba(0,0,0,.4);-webkit-border-radius:9999px;-moz-border-radius:9999px;border-radius:9999px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.instagram-slider .swiper-button-prev::after,.instagram-slider .swiper-button-next::after{font-size:18px}"})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[1155,851,4212,7469,8441,1684,7358],()=>s(4100)),_N_E=e.O()}]);