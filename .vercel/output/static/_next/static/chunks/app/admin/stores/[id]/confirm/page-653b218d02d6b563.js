(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8286],{706:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});let a=(e,t)=>{"function"==typeof window.gtag&&window.gtag("event",e,t||{})}},3168:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},3554:(e,t,s)=>{Promise.resolve().then(s.bind(s,7173))},4990:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(5155),r=s(9137),n=s.n(r),i=s(2115),l=s(7677),o=s(7269);s(2252),s(9408),s(6970);var c=s(706);function d(e){let{posts:t,onClickPost:s}=e;return((0,i.useEffect)(()=>{if(!document.getElementById("instagram-embed-script")){let e=document.createElement("script");e.id="instagram-embed-script",e.src="https://www.instagram.com/embed.js",e.async=!0,e.onerror=()=>{console.warn("Instagram embed script failed to load.")},document.body.appendChild(e)}},[]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{try{var e,t;null==(t=window.instgrm)||null==(e=t.Embeds)||e.process()}catch(e){console.warn("Instagram Embed error:",e)}},500);return()=>clearTimeout(e)},[t]),0===t.length)?null:(0,a.jsxs)("div",{className:"jsx-31a727e351345d87 w-full px-4 pb-8 relative",children:[(0,a.jsxs)("p",{className:"jsx-31a727e351345d87 text-base mb-2 flex items-center gap-2 font-[#1F1F21]",children:[(0,a.jsx)("span",{className:"jsx-31a727e351345d87 w-[12px] h-[12px] bg-[#4B5C9E] rounded-[2px] inline-block"}),"Instagram"]}),(0,a.jsx)(l.RC,{slidesPerView:1,spaceBetween:10,navigation:!0,loop:!0,pagination:{clickable:!0},grabCursor:!0,simulateTouch:!0,touchStartPreventDefault:!1,modules:[o.Vx,o.dK],className:"w-full rounded-lg instagram-slider",children:t.map((e,t)=>(0,a.jsx)(l.qr,{children:(0,a.jsx)("div",{className:"jsx-31a727e351345d87 w-full aspect-square rounded-lg overflow-hidden",children:(0,a.jsx)("div",{onClick:async t=>{t.stopPropagation();try{(0,c.J)("click_instagram",{instagram_url:e}),await new Promise(e=>setTimeout(e,300)),s&&await s(e)}finally{window.open(e,"_blank","noopener,noreferrer")}},className:"jsx-31a727e351345d87 block w-full h-full cursor-pointer",children:(0,a.jsx)("blockquote",{"data-instgrm-permalink":e,"data-instgrm-version":"14",style:{width:"100%",height:"100%",margin:0},className:"jsx-31a727e351345d87 instagram-media"})})})},t))}),(0,a.jsx)(n(),{id:"31a727e351345d87",children:".instagram-slider .swiper-button-prev,.instagram-slider .swiper-button-next{color:white;width:32px;height:32px;background:rgba(0,0,0,.4);-webkit-border-radius:9999px;-moz-border-radius:9999px;border-radius:9999px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.instagram-slider .swiper-button-prev::after,.instagram-slider .swiper-button-next::after{font-size:18px}"})]})}},7173:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(2115),n=s(5695),i=s(3168),l=s(6766),o=s(4990);let c=["月曜","火曜","水曜","木曜","金曜","土曜","日曜"];function d(){var e,t;let s=(0,n.useRouter)(),d=null!=(t=null==(e=(0,n.useParams)())?void 0:e.id)?t:"",[u,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=sessionStorage.getItem("editStoreData");e&&p(JSON.parse(e))},[]);let x=e=>e.replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).replace(/〜/g,"〜").trim(),g=e=>e.map((e,t)=>{let s=x(e);return s.startsWith(c[t])?s:s.startsWith(c[t][0])?"".concat(c[t]," ").concat(s.slice(1).trim()):"休み"===s?"".concat(c[t]," 休み"):"".concat(c[t]," ").concat(s)}).join("\n"),b=async()=>{if(!u)return;let{error:e}=await i.N.from("stores").update({name:u.name,genre:u.genre,area:u.area,address:u.address,phone_number:u.phone,opening_hours:g(u.openingHoursList),website:u.websiteUrl,instagram:u.instagramUrl,payment_methods:u.paymentMethods,description:u.description,image_url:u.imageUrl,store_instagrams:u.storeInstagram1,store_instagrams2:u.storeInstagram2,store_instagrams3:u.storeInstagram3}).eq("id",d);if(e)return void alert("保存に失敗しました");alert("保存しました！"),sessionStorage.removeItem("editStoreData"),s.push("/admin/stores")};return u?(0,a.jsxs)("div",{className:"min-h-screen bg-[#FEFCF6] pt-24 px-10 pb-10 text-gray-800",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center mb-8",children:"店舗情報確認"}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-4",children:[(0,a.jsx)(m,{label:"店舗名",value:u.name}),(0,a.jsx)(m,{label:"ジャンル",value:u.genre}),(0,a.jsx)(m,{label:"エリア",value:u.area}),(0,a.jsx)(m,{label:"住所",value:u.address}),(0,a.jsx)(m,{label:"電話番号",value:u.phone}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"営業時間"}),(0,a.jsx)("p",{className:"text-lg whitespace-pre-line",children:g(u.openingHoursList)})]}),(0,a.jsx)(m,{label:"公式サイト",value:u.websiteUrl,isLink:!0}),(0,a.jsx)(m,{label:"Instagramアカウント",value:u.instagramUrl,isLink:!0}),(0,a.jsx)(m,{label:"支払い方法",value:u.paymentMethods.join(", ")}),(0,a.jsx)(m,{label:"説明",value:u.description}),u.imageUrl&&(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsx)(l.default,{src:u.imageUrl,alt:"店舗画像",width:400,height:300,className:"rounded shadow"})}),(0,a.jsx)(o.A,{posts:[u.storeInstagram1,u.storeInstagram2,u.storeInstagram3].filter(e=>!!e)}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-10",children:[(0,a.jsx)("button",{onClick:()=>s.push("/admin/stores/".concat(d,"/edit")),className:"bg-gray-500 text-white py-2 px-6 rounded hover:bg-gray-600",children:"編集に戻る"}),(0,a.jsx)("button",{onClick:b,className:"bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600",children:"更新する"})]})]})]}):(0,a.jsx)("div",{className:"text-center p-10",children:"データが見つかりませんでした"})}function m(e){let{label:t,value:s,isLink:r}=e;return s?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:t}),r?(0,a.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline break-words",children:s}):(0,a.jsx)("p",{className:"text-lg break-words",children:s})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[1155,851,4212,7469,8441,1684,7358],()=>t(3554)),_N_E=e.O()}]);