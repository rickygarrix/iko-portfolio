(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4700],{3168:(e,s,t)=>{"use strict";t.d(s,{N:()=>a});let a=(0,t(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"notFound")&&t.d(s,{notFound:function(){return a.notFound}}),t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},7427:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var a=t(5155),r=t(5695),u=t(2115),n=t(3168);function c(){let e=(0,r.useRouter)(),s=(0,r.useSearchParams)(),[t,c]=(0,u.useState)(!1),[o,i]=(0,u.useState)(""),[l,d]=(0,u.useState)(""),[m,h]=(0,u.useState)(""),[p,f]=(0,u.useState)("");(0,u.useEffect)(()=>{if(!s)return;let e=s.get("token"),t=s.get("type"),a=s.get("email");if(!e||!a||"recovery"!==t)return void h("URLに確認コードまたはメールアドレスが含まれていません。");(async()=>{let{data:s,error:t}=await n.N.auth.verifyOtp({type:"recovery",token:e,email:a});t?h("認証コードが無効です："+t.message):(s.session&&await n.N.auth.setSession({access_token:s.session.access_token,refresh_token:s.session.refresh_token}),c(!0))})()},[s]);let N=async()=>{if(h(""),f(""),!o||!l)return h("すべての項目を入力してください。");if(o!==l)return h("パスワードが一致しません。");let{error:s}=await n.N.auth.updateUser({password:o});s?h("パスワードの更新に失敗しました："+s.message):(f("パスワードを更新しました。ログインページへ移動します。"),setTimeout(()=>{e.push("/login")},2e3))};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 text-gray-800",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-4",children:"パスワード再設定"}),m&&(0,a.jsx)("p",{className:"text-red-600 mb-4",children:m}),p&&(0,a.jsx)("p",{className:"text-green-600 mb-4",children:p}),t&&(0,a.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,a.jsx)("input",{type:"password",placeholder:"新しいパスワード",className:"w-full border rounded px-3 py-2",value:o,onChange:e=>i(e.target.value)}),(0,a.jsx)("input",{type:"password",placeholder:"確認用パスワード",className:"w-full border rounded px-3 py-2",value:l,onChange:e=>d(e.target.value)}),(0,a.jsx)("button",{onClick:N,className:"w-full bg-blue-600 text-white py-2 rounded",children:"パスワードを更新する"})]})]})}},7875:(e,s,t)=>{Promise.resolve().then(t.bind(t,7427))}},e=>{var s=s=>e(e.s=s);e.O(0,[851,8441,1684,7358],()=>s(7875)),_N_E=e.O()}]);