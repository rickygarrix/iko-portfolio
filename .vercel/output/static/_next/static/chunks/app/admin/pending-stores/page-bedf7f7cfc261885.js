(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1511],{3168:(e,s,r)=>{"use strict";r.d(s,{N:()=>t});let t=(0,r(851).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},3299:(e,s,r)=>{Promise.resolve().then(r.bind(r,4442))},4442:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var t=r(5155),a=r(2115),n=r(3168),i=r(5695);function c(){let[e,s]=(0,a.useState)([]),[r,c]=(0,a.useState)(!0),d=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{let{data:e,error:s}=await n.N.auth.getUser();if(s||!e.user){alert("ログインが必要です"),d.push("/login");return}if("chloerickyc@gmail.com"!==e.user.email){alert("アクセス権限がありません"),d.push("/");return}})()},[d]),(0,a.useEffect)(()=>{(async()=>{let{data:e,error:r}=await n.N.from("stores").select("id, name, genre, description").eq("is_pending",!0).eq("is_deleted",!1);r?console.error("取得エラー:",r):s(e||[]),c(!1)})()},[]);let l=async e=>{if(!window.confirm("この店舗を削除しますか？"))return;let{error:s}=await n.N.from("stores").update({is_deleted:!0}).eq("id",e);if(s){alert("削除に失敗しました"),console.error(s.message);return}alert("削除しました！"),setTimeout(()=>{d.push("/admin/pending-stores")},0)};return r?(0,t.jsx)("div",{className:"text-center p-10 text-gray-800",children:"読み込み中..."}):(0,t.jsxs)("div",{className:"min-h-screen bg-[#FEFCF6] pt-24 px-10 pb-10 text-gray-800",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"店舗登録申請一覧"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100 text-gray-700",children:[(0,t.jsx)("th",{className:"py-2 px-4 border",children:"店名"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"ジャンル"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"説明"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"操作"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"text-center",children:[(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.name}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.genre}),(0,t.jsxs)("td",{className:"py-2 px-4 border",children:[e.description.slice(0,30),"..."]}),(0,t.jsxs)("td",{className:"py-2 px-4 border space-x-2",children:[(0,t.jsx)("button",{className:"bg-blue-500 text-white font-semibold rounded px-3 py-1 hover:bg-blue-600",onClick:()=>d.push("/admin/pending-stores/".concat(e.id)),children:"詳細"}),(0,t.jsx)("button",{className:"bg-red-500 text-white font-semibold rounded px-3 py-1 hover:bg-red-600",onClick:()=>l(e.id),children:"削除"})]})]},e.id))})]})}),(0,t.jsx)("div",{className:"flex justify-center mt-10",children:(0,t.jsx)("button",{onClick:()=>d.push("/admin"),className:"bg-gray-500 text-white py-2 px-6 rounded hover:bg-gray-600",children:"管理画面トップに戻る"})})]})}},5695:(e,s,r)=>{"use strict";var t=r(8999);r.o(t,"notFound")&&r.d(s,{notFound:function(){return t.notFound}}),r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[851,8441,1684,7358],()=>s(3299)),_N_E=e.O()}]);