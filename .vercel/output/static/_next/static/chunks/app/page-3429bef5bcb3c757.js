(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{275:(e,t,s)=>{Promise.resolve().then(s.bind(s,7616))},3258:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(5155);s(2115);let n=["House","Jazz","Techno","EDM"],l=["新宿","渋谷","六本木","池袋","銀座","表参道"],c=["現金","クレジットカード","電子マネー"];function r(e){let{selectedGenres:t,setSelectedGenres:s,selectedAreas:r,setSelectedAreas:i,selectedPayments:o,setSelectedPayments:d,showOnlyOpen:m,setShowOnlyOpen:u,handleSearch:p}=e;return(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-800 rounded",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"検索フィルター"}),(0,a.jsxs)("label",{className:"mt-4 block",children:[(0,a.jsx)("input",{type:"checkbox",checked:m,onChange:()=>u(!m),className:"mr-2"}),"営業中のみ表示"]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"font-semibold mb-2",children:"ジャンル"}),n.map(e=>(0,a.jsxs)("label",{className:"mr-4",children:[(0,a.jsx)("input",{type:"checkbox",className:"mr-2",checked:t.includes(e),onChange:()=>s(t.includes(e)?t.filter(t=>t!==e):[...t,e])}),e]},e))]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"font-semibold mb-2",children:"エリア"}),l.map(e=>(0,a.jsxs)("label",{className:"mr-4",children:[(0,a.jsx)("input",{type:"checkbox",className:"mr-2",checked:r.includes(e),onChange:()=>i(r.includes(e)?r.filter(t=>t!==e):[...r,e])}),e]},e))]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"font-semibold mb-2",children:"支払い方法"}),c.map(e=>(0,a.jsxs)("label",{className:"mr-4",children:[(0,a.jsx)("input",{type:"checkbox",className:"mr-2",checked:o.includes(e),onChange:()=>d(o.includes(e)?o.filter(t=>t!==e):[...o,e])}),e]},e))]}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),p()},className:"bg-blue-500 text-white px-4 py-2 rounded mt-4",children:"検索"}),(0,a.jsx)("button",{onClick:()=>{s([]),i([]),d([]),u(!1)},className:"bg-gray-500 text-white px-4 py-2 rounded mt-4 ml-4",children:"リセット"})]})}},6855:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(5974).UU)("https://bqexmwjcmtyypzucndrb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxZXhtd2pjbXR5eXB6dWNuZHJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MjA5NjQsImV4cCI6MjA1NjE5Njk2NH0.LgmwOIcW4UsTqwigP7BgXBrQmtSah362_dsWqjecTQQ")},2558:(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var a=s(1455),n=s.n(a);s(1550);var l=s(4084),c=s.n(l);n().extend(c());let r=e=>e.replace("Sunday","日曜日").replace("Monday","月曜日").replace("Tuesday","火曜日").replace("Wednesday","水曜日").replace("Thursday","木曜日").replace("Friday","金曜日").replace("Saturday","土曜日").replace("曜日",""),i=e=>{var t,s,a,l;let c=n()().locale("ja"),i=c;6>c.hour()&&(i=c.subtract(1,"day"));let o=r(i.format("dddd")),d=r(i.add(1,"day").format("dddd")),m=c.format("HH:mm");console.log("\uD83D\uDCC6 現在の曜日: '".concat(o,"', 時刻: ").concat(m)),console.log("\uD83D\uDD0D Supabase から取得した営業時間のデータ:",e);let u={};e.split("\n").forEach(e=>{let t=e.match(/^(.+?曜)\s*(.+)$/);if(t&&t[1]&&t[2]){let e=t[1].trim(),s=t[2].trim();if("休み"===s)u[e]=[];else{let t=s.split(", ");u[e]=t.map(e=>{let[t,s]=e.split("〜").map(e=>e.trim());return{open:t,close:s}})}}}),console.log("\uD83D\uDDFA 営業時間マップのキー:",Object.keys(u)),console.log("\uD83D\uDD0D 検索対象:",o);let p=Object.keys(u).find(e=>e.startsWith(o));if(!p||!u.hasOwnProperty(p)||!Array.isArray(u[p])||(null===(t=u[p])||void 0===t?void 0:t.length)===0){console.warn("⚠️ '".concat(o,"' は休業日"));let e=Object.keys(u).find(e=>e.startsWith(d));return e&&u.hasOwnProperty(e)&&Array.isArray(u[e])?{isOpen:!1,nextOpening:"次の営業: ".concat(e," ").concat(null===(s=u[e][0])||void 0===s?void 0:s.open," から")}:{isOpen:!1,nextOpening:"営業情報なし"}}let h=u[p]||[];if(console.log("\uD83D\uDCC6 今日(".concat(o,") の営業時間:"),h),!h.length)return{isOpen:!1,nextOpening:"情報なし"};let x="",j=!1;for(let e of h){let t=parseInt(e.open.split(":")[0],10),s=parseInt(e.open.split(":")[1],10),a=parseInt(e.close.split(":")[0],10),n=parseInt(e.close.split(":")[1],10),l=i.set("hour",t).set("minute",s),r=i.set("hour",a).set("minute",n);if(a>=24&&(a-=24,r=i.add(1,"day").set("hour",a).set("minute",n)),console.log("\uD83D\uDD52 営業時間: ".concat(l.format("YYYY-MM-DD HH:mm")," 〜 ").concat(r.format("YYYY-MM-DD HH:mm"))),c.isBetween(l,r,null,"[)")){j=!0,x="本日 ".concat(r.format("HH:mm")," まで営業");break}}if(!j){if(6>c.hour())return{isOpen:!1,nextOpening:""};let e=h.filter(e=>n()("".concat(i.format("YYYY-MM-DD")," ").concat(e.open)).isAfter(i));if(e.length>0)x="次の営業: ".concat(o," ").concat(null===(a=e[0])||void 0===a?void 0:a.open," から");else{let e=Object.keys(u).find(e=>e.startsWith(d));e&&u[e].length>0&&(x="次の営業: ".concat(e," ").concat(null===(l=u[e][0])||void 0===l?void 0:l.open," から"))}}return{isOpen:j,nextOpening:x}}},7616:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(5155),n=s(2115),l=s(6046),c=s(7711),r=s(3258);let i=["今日はどこに行こうかな？","もしかしたら新たな出会いがあるかも？","はぁー今日も疲れた、音楽聴きたい"];function o(){let[e,t]=(0,n.useState)(0),[s,l]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=setInterval(()=>{l(!1),setTimeout(()=>{t(e=>(e+1)%i.length),l(!0)},500)},3e3);return()=>clearInterval(e)},[]),(0,a.jsx)("div",{className:"text-center text-lg font-semibold text-white my-4",children:(0,a.jsx)("p",{className:"transition-opacity duration-500 ".concat(s?"opacity-100":"opacity-0"),children:i[e]})})}var d=s(6855),m=s(8173),u=s.n(m),p=s(2558),h=s(5565);function x(){let[e,t]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{let{data:e,error:s}=await d.N.from("stores").select("*").limit(3);s?(console.error("\uD83D\uDD25 Supabase Error:",s.message),t([])):t(e||[])})()},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mt-6",children:"今月のおすすめのハコ"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:e.map(e=>{var t;let{isOpen:s,nextOpening:n}=(0,p.C)(e.opening_hours);return(0,a.jsx)(u(),{href:"/stores/".concat(e.id),passHref:!0,children:(0,a.jsxs)("div",{className:"p-4 bg-gray-800 rounded shadow flex",children:[(0,a.jsx)(h.default,{src:null!==(t=e.image_url)&&void 0!==t?t:"/default-image.jpg",alt:e.name,width:128,height:128,className:"object-cover rounded"}),(0,a.jsxs)("div",{className:"ml-4 flex flex-col justify-between",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-400",children:["\uD83D\uDCCD: ",e.area," / \uD83C\uDFB5",e.genre]}),(0,a.jsxs)("p",{className:s?"text-green-400":"text-red-400",children:["\uD83D\uDD57 ",s?"営業中":"営業時間外"]}),(0,a.jsx)("p",{className:"text-white",children:n})]})]})},e.id)})})]})}var j=s(6584);let b=(0,c.default)(()=>Promise.all([s.e(84),s.e(854)]).then(s.bind(s,1473)),{loadableGenerated:{webpack:()=>[1473]},ssr:!1});function g(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)([]),[c,i]=(0,n.useState)([]),[d,m]=(0,n.useState)([]),[u,p]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[(0,a.jsx)(j.default,{strategy:"beforeInteractive",src:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyCTM0zn6wKK2F3nG4Qp0xHoQaAMn-dhrac","&libraries=places")}),(0,a.jsx)(r.A,{selectedGenres:t,setSelectedGenres:s,selectedAreas:c,setSelectedAreas:i,selectedPayments:d,setSelectedPayments:m,showOnlyOpen:u,setShowOnlyOpen:p,handleSearch:()=>{let s=new URLSearchParams;t.length>0&&s.append("genre",t.join(",")),c.length>0&&s.append("area",c.join(",")),d.length>0&&s.append("payment",d.join(",")),u&&s.append("open","true"),""===s.toString()&&s.set("all","true"),e.push("/search?".concat(s.toString()))}}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("button",{onClick:()=>g(!h),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:h?"リスト表示に戻る":"\uD83D\uDCCD 地図から探す"})}),h?(0,a.jsx)(b,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{}),(0,a.jsx)(x,{})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[736,173,738,259,441,517,358],()=>t(275)),_N_E=e.O()}]);